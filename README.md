```mermaid
flowchart TD
    A["t-1: 状态 x<br/>（用 locker）"]
    B["t-1: 状态 1-x<br/>（不用 locker）"]

    A -->|1-δ| C["t: 2 + z·x"]
    A -->|δ| D["t: 1 - (2 + z·x)"]

    B -->|δ| C
    B -->|1-δ| D

    C -->|1-δ| E[t+1: 2(z+1) + z² x]
    C -->|δ| F[t+1: 1 − (2(z+1) + z² x)]

    D -->|δ| E
    D -->|1-δ| F

    E --> G[t+n: 2(zⁿ + zⁿ⁻¹ + … + z + 1) + zⁿ⁺¹ x]
    G --> H[= 2·(zⁿ⁺¹ − 1)/(z − 1) + zⁿ⁺¹ x]

    F --> I[对称结果]
    I --> J[1 − (2·(zⁿ⁺¹ − 1)/(z − 1) + zⁿ⁺¹ x)]

